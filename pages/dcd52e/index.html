<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试题 | 跳跳猪</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="吃得好，睡得好">
    
    <link rel="preload" href="/assets/css/0.styles.542f065b.css" as="style"><link rel="preload" href="/assets/js/app.9ac200f5.js" as="script"><link rel="preload" href="/assets/js/2.f08c2e94.js" as="script"><link rel="preload" href="/assets/js/66.ae967862.js" as="script"><link rel="prefetch" href="/assets/js/10.104e03e5.js"><link rel="prefetch" href="/assets/js/11.18d17b89.js"><link rel="prefetch" href="/assets/js/12.31c398a8.js"><link rel="prefetch" href="/assets/js/13.b5ee2d7d.js"><link rel="prefetch" href="/assets/js/14.a60f524e.js"><link rel="prefetch" href="/assets/js/15.55fd61b8.js"><link rel="prefetch" href="/assets/js/16.7aa17999.js"><link rel="prefetch" href="/assets/js/17.24758699.js"><link rel="prefetch" href="/assets/js/18.0b71a4f7.js"><link rel="prefetch" href="/assets/js/19.4770b075.js"><link rel="prefetch" href="/assets/js/20.fe4d448c.js"><link rel="prefetch" href="/assets/js/21.6ef119a3.js"><link rel="prefetch" href="/assets/js/22.68798857.js"><link rel="prefetch" href="/assets/js/23.a8a337ba.js"><link rel="prefetch" href="/assets/js/24.c156d0fe.js"><link rel="prefetch" href="/assets/js/25.b840f4b8.js"><link rel="prefetch" href="/assets/js/26.37c5f756.js"><link rel="prefetch" href="/assets/js/27.5b776d07.js"><link rel="prefetch" href="/assets/js/28.4d89a988.js"><link rel="prefetch" href="/assets/js/29.d8405b8b.js"><link rel="prefetch" href="/assets/js/3.98efb80c.js"><link rel="prefetch" href="/assets/js/30.67c25a87.js"><link rel="prefetch" href="/assets/js/31.cd45304b.js"><link rel="prefetch" href="/assets/js/32.b0bff8a4.js"><link rel="prefetch" href="/assets/js/33.b8e0beb7.js"><link rel="prefetch" href="/assets/js/34.eedead55.js"><link rel="prefetch" href="/assets/js/35.44fef23e.js"><link rel="prefetch" href="/assets/js/36.3e7830e5.js"><link rel="prefetch" href="/assets/js/37.8f711bb3.js"><link rel="prefetch" href="/assets/js/38.3b7df8b6.js"><link rel="prefetch" href="/assets/js/39.a7dfb50c.js"><link rel="prefetch" href="/assets/js/4.2e894fd2.js"><link rel="prefetch" href="/assets/js/40.ba597a3a.js"><link rel="prefetch" href="/assets/js/41.0955ce39.js"><link rel="prefetch" href="/assets/js/42.b1629e72.js"><link rel="prefetch" href="/assets/js/43.606f57ec.js"><link rel="prefetch" href="/assets/js/44.5e8f4801.js"><link rel="prefetch" href="/assets/js/45.fc255c2f.js"><link rel="prefetch" href="/assets/js/46.9222248d.js"><link rel="prefetch" href="/assets/js/47.d6bf833e.js"><link rel="prefetch" href="/assets/js/48.40e23b48.js"><link rel="prefetch" href="/assets/js/49.ba7c2b8d.js"><link rel="prefetch" href="/assets/js/5.d2ef2a1a.js"><link rel="prefetch" href="/assets/js/50.487406c6.js"><link rel="prefetch" href="/assets/js/51.3f8ea397.js"><link rel="prefetch" href="/assets/js/52.acd66974.js"><link rel="prefetch" href="/assets/js/53.58c7fc05.js"><link rel="prefetch" href="/assets/js/54.0f8282f4.js"><link rel="prefetch" href="/assets/js/55.ad7bb205.js"><link rel="prefetch" href="/assets/js/56.590655d9.js"><link rel="prefetch" href="/assets/js/57.9a85aa7a.js"><link rel="prefetch" href="/assets/js/58.1b4ef9fd.js"><link rel="prefetch" href="/assets/js/59.9420c0ba.js"><link rel="prefetch" href="/assets/js/6.65a955fd.js"><link rel="prefetch" href="/assets/js/60.30009201.js"><link rel="prefetch" href="/assets/js/61.0047220f.js"><link rel="prefetch" href="/assets/js/62.a368a893.js"><link rel="prefetch" href="/assets/js/63.3315d70a.js"><link rel="prefetch" href="/assets/js/64.3e3c478f.js"><link rel="prefetch" href="/assets/js/65.80a47305.js"><link rel="prefetch" href="/assets/js/67.606a99c5.js"><link rel="prefetch" href="/assets/js/68.46eb6539.js"><link rel="prefetch" href="/assets/js/69.c6067a0e.js"><link rel="prefetch" href="/assets/js/7.ed4f4e88.js"><link rel="prefetch" href="/assets/js/8.517c5e6e.js"><link rel="prefetch" href="/assets/js/9.bef30b40.js">
    <link rel="stylesheet" href="/assets/css/0.styles.542f065b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://excalidraw.com/apple-touch-icon.png" alt="跳跳猪" class="logo"> <span class="site-name can-hide">跳跳猪</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/md/java/JAVA基础.html" class="nav-link">JAVA</a></div><div class="nav-item"><a href="/md/database/mysql/MySql操作.html" class="nav-link">数据库</a></div><div class="nav-item"><a href="/md/opSystem/linux/linux操作笔记.html" class="nav-link">操作系统</a></div><div class="nav-item"><a href="/md/middleware/mq/消息队列.html" class="nav-link">中间件</a></div><div class="nav-item"><a href="/md/tool/docker/docker.html" class="nav-link">开发工具</a></div><div class="nav-item"><a href="/md/designPattern/" class="nav-link">设计模式</a></div><div class="nav-item"><a href="/md/netty/BIO、NIO、AIO.html" class="nav-link">netty</a></div><div class="nav-item"><a href="/md/DDD/小傅哥案例学习打卡/DDD抽奖系统学习打卡🚀 day 1.html" class="nav-link">DDD</a></div><div class="nav-item"><a href="/md/other/面试题.html" class="nav-link">other</a></div><div class="nav-item"><a href="/md/notes/" class="nav-link">测试</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="提示语" class="dropdown-title"><!----> <span class="title" style="display:;">测试下拉菜单</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/notes/" class="nav-link">菜单1</a></li><li class="dropdown-item"><!----> <a href="/md/notes/" class="nav-link">菜单2</a></li><li class="dropdown-item"><h4>多次菜单</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/notes/" class="nav-link">多级菜单1</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/md/java/JAVA基础.html" class="nav-link">JAVA</a></div><div class="nav-item"><a href="/md/database/mysql/MySql操作.html" class="nav-link">数据库</a></div><div class="nav-item"><a href="/md/opSystem/linux/linux操作笔记.html" class="nav-link">操作系统</a></div><div class="nav-item"><a href="/md/middleware/mq/消息队列.html" class="nav-link">中间件</a></div><div class="nav-item"><a href="/md/tool/docker/docker.html" class="nav-link">开发工具</a></div><div class="nav-item"><a href="/md/designPattern/" class="nav-link">设计模式</a></div><div class="nav-item"><a href="/md/netty/BIO、NIO、AIO.html" class="nav-link">netty</a></div><div class="nav-item"><a href="/md/DDD/小傅哥案例学习打卡/DDD抽奖系统学习打卡🚀 day 1.html" class="nav-link">DDD</a></div><div class="nav-item"><a href="/md/other/面试题.html" class="nav-link">other</a></div><div class="nav-item"><a href="/md/notes/" class="nav-link">测试</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="提示语" class="dropdown-title"><!----> <span class="title" style="display:;">测试下拉菜单</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/notes/" class="nav-link">菜单1</a></li><li class="dropdown-item"><!----> <a href="/md/notes/" class="nav-link">菜单2</a></li><li class="dropdown-item"><h4>多次菜单</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/notes/" class="nav-link">多级菜单1</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>other</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/dcd52e/" aria-current="page" class="active sidebar-link">面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#springaop动态代理默认是jdk还是cglib" class="sidebar-link">springAOP动态代理默认是jdk还是cglib?</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#事务的四大特性-acid" class="sidebar-link">事务的四大特性 ACID</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#本地事务失效" class="sidebar-link">本地事务失效</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#事务传播等级" class="sidebar-link">事务传播等级</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#分布式事务" class="sidebar-link">分布式事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#_1-2pc模式" class="sidebar-link">1. 2PC模式</a></li><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#_2-柔性事务-tcc事务补偿型方案" class="sidebar-link">2. 柔性事务-TCC事务补偿型方案</a></li><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#_3-柔性事务-最大努力通知型方案" class="sidebar-link">3. 柔性事务-最大努力通知型方案</a></li><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#_4-柔性事务-可靠消息-最终一致性方案-异步确保型" class="sidebar-link">4. 柔性事务-可靠消息+最终一致性方案(异步确保型)</a></li><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#实现案例" class="sidebar-link">实现案例:</a></li><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#_1-使用seata用at-自动-模式控制分布式事务" class="sidebar-link">1. 使用Seata用AT(自动)模式控制分布式事务</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#脏读、不可重复读、幻读" class="sidebar-link">脏读、不可重复读、幻读</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#数据隔离等级" class="sidebar-link">数据隔离等级</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#mysql存储引擎有几种" class="sidebar-link">mysql存储引擎有几种?</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#redis持久化方式" class="sidebar-link">redis持久化方式</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#redis数据更新" class="sidebar-link">redis数据更新</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#为什么使用iterator-它的用法" class="sidebar-link">为什么使用Iterator, 它的用法</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#autowired注解底层的注入方式-还有哪些注解-如果bean同名怎么办" class="sidebar-link">@autowired注解底层的注入方式, 还有哪些注解? 如果bean同名怎么办?</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#springboot和ssm的对比" class="sidebar-link">springboot和ssm的对比</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#springboot常用注解" class="sidebar-link">springboot常用注解</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#常用的设计模式" class="sidebar-link">常用的设计模式</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#springcloud常用的注解" class="sidebar-link">springCloud常用的注解</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#如果面对并发问题" class="sidebar-link">如果面对并发问题</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#nginx负载均衡的方式-以及匹配-abc-和-abc的区别" class="sidebar-link">nginx负载均衡的方式, 以及匹配/abc/和/abc的区别</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#redis的内存穿透" class="sidebar-link">redis的内存穿透</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#缓存击穿" class="sidebar-link">缓存击穿</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#缓存雪崩" class="sidebar-link">缓存雪崩</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#springboot的启动机制" class="sidebar-link">springboot的启动机制</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#java常用的数据结构有哪些-哪些是线程安全的-是怎么保证线程安全的" class="sidebar-link">java常用的数据结构有哪些? 哪些是线程安全的? 是怎么保证线程安全的?</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#hashmap可以使用基本数据类型做key吗" class="sidebar-link">hashmap可以使用基本数据类型做key吗?</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#linkedhashmap原理" class="sidebar-link">LinkedHashMap原理</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#线程池" class="sidebar-link">线程池</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#线程池的优势" class="sidebar-link">线程池的优势</a></li><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#线程池的主要参数" class="sidebar-link">线程池的主要参数</a></li><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#拒绝策略" class="sidebar-link">拒绝策略:</a></li><li class="sidebar-sub-header level3"><a href="/pages/dcd52e/#常见的线程池" class="sidebar-link">常见的线程池:</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#数据连接池" class="sidebar-link">数据连接池</a></li><li class="sidebar-sub-header level2"><a href="/pages/dcd52e/#rebbitmq的优缺点" class="sidebar-link">rebbitmq的优缺点</a></li></ul></li><li><a href="/pages/4778f1/" class="sidebar-link">oAuth2.0基本概念</a></li><li><a href="/pages/3e5ec5/" class="sidebar-link">shiro简单使用</a></li><li><a href="/pages/57df53/" class="sidebar-link">filebate推送日志假死问题</a></li><li><a href="/pages/ca5c7f/" class="sidebar-link">springboot框架到2.5.12后redis连接报错</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>md</span></li><li data-v-06225672><span data-v-06225672>other</span></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-10-28</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">面试题<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="面试题"><a href="#面试题" class="header-anchor">#</a> 面试题</h1> <h2 id="springaop动态代理默认是jdk还是cglib"><a href="#springaop动态代理默认是jdk还是cglib" class="header-anchor">#</a> springAOP动态代理默认是jdk还是cglib?</h2> <p>spring中aop动态代理默认是jdk, cglib是第三方代理机制, 不过在springboot中好像就是cglib了</p> <h2 id="事务的四大特性-acid"><a href="#事务的四大特性-acid" class="header-anchor">#</a> 事务的四大特性 ACID</h2> <p>原子性, 一致性, 隔离性, 持久性</p> <p>通过transaction注解进行事务时,通过参数isolation可以设置隔离级别, propagation可以设置传播级别</p> <p>事务是使用代理对象控制的 如果同一个类下方法互相调用,A调用BC,那么不管BC怎么设置都和A相同的事务;, 因为绕过了代理对象, 如果注入自身再调用是可以的(但是自身循环依赖会出问题的) 如果是不同的类,A调用BC, B设置默认PROPAGATION_REQUIRED ,C设置PROPAGATION_REQUIRES_NEW ,那么B和A同一个事务, C自己一个事务</p> <h2 id="本地事务失效"><a href="#本地事务失效" class="header-anchor">#</a> 本地事务失效</h2> <p>同一个对象内事务方法互调默认失效, 原因: 绕过了代理对象, 事务使用代理对象来控制 解决: 使用代理对象来调用事务 1.引入aop-starter; spring-boot-starter-aop; 引入了aspectj 2.在类上注解@EnableAspectJAutoProxy(exposeProxy = true); 开启aspectj动态代理功能, 对外暴露对象 3.本类互相调用, AopContext.currentProxy();即可获取代理对象</p> <h2 id="事务传播等级"><a href="#事务传播等级" class="header-anchor">#</a> 事务传播等级</h2> <p>七种</p> <p>PROPAGATION_REQUIRED 支持当前事务。如果没有事务则开启一个新的事务。 PROPAGATION_SUPPORTS 支持当前事务。如果没有事务，则非事务的执行。但是对于事务同步的事务管理器， PROPAGATION_MANDATORY 支持当前事务。如果没有一个活动的事务，则抛出异常。 PROPAGATION_REQUIRES_NEW 开启一个新的事务。如果一个事务已经存在，则将这个存在的事务挂起。 PROPAGATION_NOT_SUPPORTED 总是非事务地执行，并挂起任何存在的事务。 PROPAGATION_NEVER 总是非事务地执行，如果存在一个活动事务，则抛出异常 PROPAGATION_NESTED 如果一个活动的事务存在，则运行在一个嵌套的事务中.</p> <h2 id="分布式事务"><a href="#分布式事务" class="header-anchor">#</a> 分布式事务</h2> <p>本地事务: 微服务之间feign调用,会存在网络问题, 异常传递不靠谱, 比如B成功了但是因为网络问题未响应结果, A认为调用超时了就会回滚; 如果A同时调用B和C , B成功, C异常没有办法使B进行回滚</p> <h3 id="_1-2pc模式"><a href="#_1-2pc模式" class="header-anchor">#</a> 1. 2PC模式</h3> <p>数据库支持2PC,是一个两阶段提交协议:</p> <p>第一阶段:事务调节器要求每个涉及到事务的数据库预提交此操作, 并反映是否可以提交</p> <p>第二阶段:事务提交器要求每个数据库提交数据</p> <p>如果有一个数据库否决了此次提交, 那么所有数据库回滚此事务中操作</p> <h3 id="_2-柔性事务-tcc事务补偿型方案"><a href="#_2-柔性事务-tcc事务补偿型方案" class="header-anchor">#</a> 2. 柔性事务-TCC事务补偿型方案</h3> <p>遵循BASE理论, 最终一致性. 允许一定时间内不同节点的数据不一致,但要求最终一致性</p> <h3 id="_3-柔性事务-最大努力通知型方案"><a href="#_3-柔性事务-最大努力通知型方案" class="header-anchor">#</a> 3. 柔性事务-最大努力通知型方案</h3> <p>按规律进行通知, 不保证数据一定能通知成功, 但会提供可查询操作接口进行核对, 这种方案主要用于第三方系统通讯时, 比如: 调用微信或支付宝支付后的支付结果通知. 这种方案也是结合MQ进行实现, 例如通过MQ发送http请求, 设置最大通知次数, 达到次数后不再通知.</p> <p>案例: 银行通知, 商户通知等(各大交易业务平台间的商户通知: 多次通知,查询校对,对账文件), 支付宝的支付成功异步回调</p> <h3 id="_4-柔性事务-可靠消息-最终一致性方案-异步确保型"><a href="#_4-柔性事务-可靠消息-最终一致性方案-异步确保型" class="header-anchor">#</a> 4. 柔性事务-可靠消息+最终一致性方案(异步确保型)</h3> <p>实现: 业务处理服务在业务事务提交之前, 向实时消息服务请求发送消息, 实时消息服务只记录消息数据, 而不是真正的发送. 业务处理服务在业务事务提交之后, 向实时消息服务确认发送. 只有在得到确认发送指令之后, 实时消息服务才会真正发送</p> <h3 id="实现案例"><a href="#实现案例" class="header-anchor">#</a> 实现案例:</h3> <h3 id="_1-使用seata用at-自动-模式控制分布式事务"><a href="#_1-使用seata用at-自动-模式控制分布式事务" class="header-anchor">#</a> 1. 使用Seata用AT(自动)模式控制分布式事务</h3> <ol><li>每一个微服务先必须创建undo_log表</li> <li>安装seata服务</li> <li>整合步骤:
<ol><li>导入seata依赖 alibaba-seata</li> <li>seata服务的配置文件 registry.conf 注册中心配置</li> <li>所有想要用到分布式事务的微服务,使用seata代理数据源(尚硅谷P290)</li> <li>每个微服务都导入seata的file.conf和registry.conf 需要改配置文件</li> <li>使用时在分布式大事务的入口A方法上标注@GlobalTransactional全局事务注解</li> <li>每一个远程小事务用本地事务@Transactional即可</li></ol></li> <li>缺点:不适合高并发场景</li></ol> <h2 id="脏读、不可重复读、幻读"><a href="#脏读、不可重复读、幻读" class="header-anchor">#</a> 脏读、不可重复读、幻读</h2> <p>脏读: 读取到了其他事务还未提交的数据</p> <p>不可重复读: 在一个事务中 两次查询数据不一致, 可能是查询过程中其他事务更新了数据</p> <p>幻读: 在一个事务内读取到了其他事务提交的数据</p> <h2 id="数据隔离等级"><a href="#数据隔离等级" class="header-anchor">#</a> 数据隔离等级</h2> <p><strong>Serializable (串行化)：可避免脏读、不可重复读、幻读的发生</strong></p> <p>该级别是最高级别的隔离级。它通过强制事务排序，使之不可能相互冲突，从而解决幻读问题。简而言之，SERIALIZABLE是在每个读的数据行上加锁。在这个级别，可能导致大量的超时Timeout和锁竞争LockContention现象，实际应用中很少使用到这个级别，但如果用户的应用为了数据的稳定性，需要强制减少并发的话，也可以选择这种隔离级</p> <p><strong>Repeatable read (可重复读)：可避免脏读、不可重复读的发生</strong></p> <p>MySQL数据库默认的隔离级别。该级别解决了READ UNCOMMITTED隔离级别导致的问题。它保证同一事务的多个实例在并发读取事务时，会“看到同样的”数据行。不过，这会导致另外一个棘手问题“幻读”。InnoDB和Falcon存储引擎通过多版本并发控制机制解决了幻读问题。</p> <p><strong>Read committed (读已提交)：可避免脏读的发生</strong></p> <p>大多数数据库系统的默认隔离级别（但是不是MySQL的默认隔离级别），满足了隔离的早先简单定义：一个事务开始时，只能“看见”已经提交事务所做的改变，一个事务从开始到提交前，所做的任何数据改变都是不可见的，除非已经提交。这种隔离级别也支持所谓的“不可重复读”。这意味着用户运行同一个语句两次，看到的结果是不同的。</p> <p><strong>Read uncommitted (读未提交)：最低级别，任何情况都无法保证</strong></p> <p>在这个隔离级别，所有事务都可以“看到”未提交事务的执行结果。在这种级别上，可能会产生很多问题，除非用户真的知道自己在做什么，并有很好的理由选择这样做。本隔离级别很少用于实际应用，因为它的性能也不必其他性能好多少，而别的级别还有其他更多的优点。读取未提交数据，也被称为“脏读”</p> <h2 id="mysql存储引擎有几种"><a href="#mysql存储引擎有几种" class="header-anchor">#</a> mysql存储引擎有几种?</h2> <p>InnoDB和MyISAM</p> <h2 id="redis持久化方式"><a href="#redis持久化方式" class="header-anchor">#</a> redis持久化方式</h2> <p>RDB和AOF</p> <p><strong>两者的区别</strong></p> <p>RDB持久化是定期将内存中的数据快照写入磁盘</p> <p>AOF持久化是日志的形式记录服务器所处理的写删操作</p> <h2 id="redis数据更新"><a href="#redis数据更新" class="header-anchor">#</a> redis数据更新</h2> <p>当数据库数据需要更新时, 是先更新redis还是先更新数据库呢?</p> <p>先更新数据库再更新缓存, 这样无论哪一步出现问题,最多用户拿到旧数据</p> <p>从并发情况和数据一致性进行分析:</p> <p>如果两步都没有出错, 那么先更新数据库不会有一致性问题, 而先更新缓存在并发情况下会出现一致性问题</p> <p>如果两步中有其中一步出错, …</p> <p>先更新数据库加过期时间比较好</p> <h2 id="为什么使用iterator-它的用法"><a href="#为什么使用iterator-它的用法" class="header-anchor">#</a> 为什么使用Iterator, 它的用法</h2> <p>Iterator是用于遍历集合的标准方法, 他可以将访问逻辑从不同类型的集合中抽象出来, 从而避免暴露集合的内部结构, 而且Iterator是通过底层指针的挪动实现的遍历, 所以当集合类型改变时, 遍历代码不需要重写.</p> <p>ListIterator可以双向迭代</p> <h2 id="autowired注解底层的注入方式-还有哪些注解-如果bean同名怎么办"><a href="#autowired注解底层的注入方式-还有哪些注解-如果bean同名怎么办" class="header-anchor">#</a> @autowired注解底层的注入方式, 还有哪些注解? 如果bean同名怎么办?</h2> <p>发现@autowired注解后, 根据当前bean类型找spring中是否有唯一该类型的bean, 如果有则注入, 如果存在多个则检查和当前bean名称相同的bean, 如果存在则注入不存在则抛异常</p> <p>@Qualifier(value=“dog1”) 可以使用这个注解指定bean的name</p> <p>@Primary 注解可以指定默认情况是,该类型注入的bean, 优先级比@Qualifier低</p> <h2 id="springboot和ssm的对比"><a href="#springboot和ssm的对比" class="header-anchor">#</a> springboot和ssm的对比</h2> <p>springboot是一个辅助型框架,为了提高效率</p> <p>可以将服务打成jar包独立运行</p> <p>简化配置文件</p> <h2 id="springboot常用注解"><a href="#springboot常用注解" class="header-anchor">#</a> springboot常用注解</h2> <p>@SpringBootApplication 核心注解,用在主类上 @RestController @Service @Mapper 标识控制层,业务层,数据层 @RequestMapping 处理请求路径映射的注解 @PostMapping @GetMapping @PathVariable 路径变量</p> <h2 id="常用的设计模式"><a href="#常用的设计模式" class="header-anchor">#</a> 常用的设计模式</h2> <p>单例模式, 工厂模式, 代理模式</p> <h2 id="springcloud常用的注解"><a href="#springcloud常用的注解" class="header-anchor">#</a> springCloud常用的注解</h2> <div class="language- extra-class"><pre class="language-text"><code>@EnableDiscoveryClient   //开启注册,将该微服务注册到注册中心@MapperScan(&quot;com.atguigu.gulimall.product.dao&quot;)   //指定map的@SpringBootApplication   //springboot的核心注解
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>//feign@EnableFeignClients   //当前微服务可以被远程调用@FeignClient(&quot;coupon&quot;)   //类上注解指定微服务的名称@RequestMapping(&quot;/coupon/coupon/member/list&quot;)   //方法上指定方法路径
</code></pre></div><h2 id="如果面对并发问题"><a href="#如果面对并发问题" class="header-anchor">#</a> 如果面对并发问题</h2> <p>1.加锁 分为单机锁和分布式锁 如果服务在多台机器上那么使用redis实现分布锁</p> <p>2.数据库乐观锁 在数据库表中添加版本号, 每次修改删除都要匹配版本号</p> <h2 id="nginx负载均衡的方式-以及匹配-abc-和-abc的区别"><a href="#nginx负载均衡的方式-以及匹配-abc-和-abc的区别" class="header-anchor">#</a> nginx负载均衡的方式, 以及匹配/abc/和/abc的区别</h2> <p>轮询, 权重, ip黏着</p> <p>配置权重,在轮询基础上 weight = 权重值(占比)</p> <p>匹配/abc和/abc/的区别:</p> <p>location 匹配是模糊匹配, 如果最后有/ 那么只能匹配目录不能匹配文件</p> <p>proxy_pass后面的, 如果https:// 后面的内容还有 / , 那么location就不会保留</p> <h2 id="redis的内存穿透"><a href="#redis的内存穿透" class="header-anchor">#</a> redis的内存穿透</h2> <p>redis缓存穿透是因为当查询一个一定不存在的数据时, 由于缓存中不命中便会查询数据库, 查不到数据就不写入缓存, 这样每次查这个不存在的数据都会去查数据库, 造成缓存穿透.</p> <p>解决方法:</p> <p>1.布隆过滤</p> <p>对所有可能查询的参数以hash形式存储, 在控制层进行校验, 不符合则丢弃. 常见的还有使用布隆过滤器, 将所有可能存在的数据hash到一个bitmap中, 一个一定不存在的数据会被bitmap拦截掉, 从而避免对底层存储的查询</p> <p>2.缓存空对象</p> <p>当查询为空时, 将这个空对象进行缓存 , 过期时间给短一些</p> <h2 id="缓存击穿"><a href="#缓存击穿" class="header-anchor">#</a> 缓存击穿</h2> <p>key对应的数据存在，但在redis中过期，此时若有大量并发请求过来，这些请求发现缓存过期一般都会从后端DB加载数据并回设到缓存，这个时候大并发的请求可能会瞬间把后端DB压垮。</p> <p>解决方法:</p> <p>1.使用互斥锁(mutex key)</p> <p>当判断失效时(value为null), 不立即去读数据库, 使用redis的SETNX存储一个标识key, 如果存储成功了, 则读数据库, 写入缓存, 删除这个标识key ; 如果存储标识key失败了, 意味着有其他线程已经在做读库操作了, 让当前线程sleep一段时间后重试</p> <div class="language- extra-class"><pre class="language-text"><code>ublic String get(key) {      String value = redis.get(key);      if (value == null) { //代表缓存值过期          //设置3min的超时，防止del操作失败的时候，下次缓存过期一直不能load db      if (redis.setnx(key_mutex, 1, 3 * 60) == 1) {  //代表设置成功               value = db.get(key);                      redis.set(key, value, expire_secs);                      redis.del(key_mutex);              } else {  //这个时候代表同时候的其他线程已经load db并回设到缓存了，这时候重试获取缓存值即可                      sleep(50);                      get(key);  //重试              }          } else {              return value;          } }
</code></pre></div><h2 id="缓存雪崩"><a href="#缓存雪崩" class="header-anchor">#</a> 缓存雪崩</h2> <p>与击穿的区别在于,是大量的key失效, 一旦缓存大量丢失缓存数据,就造成海量请求瞬间进入数据库,导致数据库崩溃–雪崩;redis出现雪崩,只需要恢复数据(持久化),memoryCache出现雪崩,只能停止服务手动将数据恢复到内存中,继续提供服务</p> <p>解决方法:</p> <p>1.线程加锁, 但是对出现一线程执行多线程等待 , 影响并发</p> <p>2.在原有失效时间上加个随机值, 让每个key的过期时间尽量错开, 避免集体失效</p> <p>3.做二级缓存, 或者双缓存机制 做两份缓存A和B, B不设失效时间, 这样当A失效后拿B的数据去返回, 同时异步启动一个更新线程, 将更新的数据同步到A和B</p> <h2 id="springboot的启动机制"><a href="#springboot的启动机制" class="header-anchor">#</a> springboot的启动机制</h2> <h2 id="java常用的数据结构有哪些-哪些是线程安全的-是怎么保证线程安全的"><a href="#java常用的数据结构有哪些-哪些是线程安全的-是怎么保证线程安全的" class="header-anchor">#</a> java常用的数据结构有哪些? 哪些是线程安全的? 是怎么保证线程安全的?</h2> <p>java常用的数据结构,主要分为Collection和map两个接口. 而最终使用的数据结构是继承自这些接口的数据结构类.</p> <h2 id="hashmap可以使用基本数据类型做key吗"><a href="#hashmap可以使用基本数据类型做key吗" class="header-anchor">#</a> hashmap可以使用基本数据类型做key吗?</h2> <p>不能, 因为基本数据类型不能调用 hashcode() 和 equals() 方法, 可以使用基本类型的包装类</p> <h2 id="linkedhashmap原理"><a href="#linkedhashmap原理" class="header-anchor">#</a> LinkedHashMap原理</h2> <p>LinkedHashMap可以存储元素的先后顺序, 原理是基于hashmap + 双向链表</p> <p>继承了hashmap,</p> <h2 id="线程池"><a href="#线程池" class="header-anchor">#</a> 线程池</h2> <h3 id="线程池的优势"><a href="#线程池的优势" class="header-anchor">#</a> 线程池的优势</h3> <p>1.降低系统资源消耗, 通过重用已存在的线程, 降低线程创建和销毁造成的消耗; 2.提高系统的响应速度, 当有任务到达时, 通过复用已存在的线程, 无需等待新线程的创建便能立即执行; 3.方便线程并发数的管控, 因为线程若是无限制的创建, 可能会导致内存占用过多而用尽内存, 并且会造成cpu过度切换 4.提供更强大的功能, 延时定时线程池.</p> <h3 id="线程池的主要参数"><a href="#线程池的主要参数" class="header-anchor">#</a> 线程池的主要参数</h3> <p>使用 ThreadPoolExecutor</p> <div class="language- extra-class"><pre class="language-text"><code> public ThreadPoolExecutor(int corePoolSize,                           int maximumPoolSize,                           long keepAliveTime,                           TimeUnit unit,                           BlockingQueue&lt;Runnable&gt; workQueue,                           ThreadFactory threadFactory,                           RejectedExecutionHandler handler)
</code></pre></div><p>corePoolSize (核心线程数量)</p> <p>maximumPoolSize (最大线程数量)</p> <p>keepAliveTime (线程存活时间): 非核心线程的存活时间</p> <p>workQueue (任务队列): 用于传输和保存等待执行任务的阻塞队列</p> <p>ThreadFactory (线程工厂)</p> <p>Handler (拒绝策略): 当线程池和队列都满了, 在加入线程时会执行此策略</p> <p>img</p> <h3 id="拒绝策略"><a href="#拒绝策略" class="header-anchor">#</a> 拒绝策略:</h3> <p>1.AbortPolicy: 不执行新任务, 直接抛出异常, 提示线程池已满 2.DisCardPolicy: 不执行新任务, 也不抛出异常 3.DisCardOldSetPolicy: 将消息队列中的第一个任务替换成当前新进来的任务执行 4.CallerRunsPolicy: 直接调用execute来执行当前任务</p> <h3 id="常见的线程池"><a href="#常见的线程池" class="header-anchor">#</a> 常见的线程池:</h3> <p>1.CachedThreadPool:可缓存的线程池，该线程池中没有核心线程，非核心线程的数量为Integer.max_value，就是无限大，当有需要时创建线程来执行任务，没有需要时回收线程，适用于耗时少，任务量大的情况。 2.SecudleThreadPool:周期性执行任务的线程池，按照某种特定的计划执行线程中的任务，有核心线程，但也有非核心线程，非核心线程的大小也为无限大。适用于执行周期性的任务。 3.SingleThreadPool:只有一条线程来执行任务，适用于有顺序的任务的应用场景。 4.FixedThreadPool:定长的线程池，有核心线程，核心线程的即为最大的线程数量，没有非核心线程</p> <h2 id="数据连接池"><a href="#数据连接池" class="header-anchor">#</a> 数据连接池</h2> <p>常见的数据库连接池主要有c3p0，dbcp，druid</p> <h2 id="rebbitmq的优缺点"><a href="#rebbitmq的优缺点" class="header-anchor">#</a> rebbitmq的优缺点</h2></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><!----> <a href="/pages/4778f1/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">oAuth2.0基本概念</div></a></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/pages/4778f1/">oAuth2.0基本概念</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>张大喵</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9ac200f5.js" defer></script><script src="/assets/js/2.f08c2e94.js" defer></script><script src="/assets/js/66.ae967862.js" defer></script>
  </body>
</html>
